#!/bin/bash
FILES=./ddocs/ddoc-*.js

push='./node_modules/couchapp/bin.js push'
couch="http://$COUCHDB_USERNAME:$COUCHDB_PASSWORD@localhost:5984/cee_portfolio"

if [[ $* == *all* ]]
then
  for f in $FILES
  do
    echo 'Processing $f file...'
    $push $f $couch
  done
  echo 'Processing app.js file...'
  $push app.js $couch
fi

if [[ -z $* ]]
then
  echo 'ERROR: No arguments given.'
  exit 1
fi

if [[ $* == *app* ]]
then
  echo 'Processing app.js file...'
  $push app.js $couch
fi

if [[ $* == *grades* ]]
then
  echo 'Processing grades.js file...'
  $push ./ddocs/ddoc-grades.js $couch
fi

if [[ $* == *publications* ]]
then
  echo 'Processing publications.js file...'
  $push ./ddocs/ddoc-publications.js $couch
fi

if [[ $* == *standards* ]]
then
  echo 'Processing standards.js file...'
  $push ./ddocs/ddoc-standards.js $couch
fi

if [[ $* == *cc* ]]
then
  echo 'Processing common-core.js file...'
  $push ./ddocs/ddoc-common-core.js $couch
fi

if [[ $* == *lessons* ]]
then
  echo 'Processing lessons.js file...'
  $push ./ddocs/ddoc-lessons.js $couch
fi